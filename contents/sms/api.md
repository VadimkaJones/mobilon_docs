--- 
template: sms.jade
title: API
order: 60
---

## API

Возможно, вам требуется рассылать данные из своих программ? Тогда есть возможность использовать API для рассылки СМС. 

Необходимо отправить https-запрос, указав ключ доступа, номер получателя и текст смс. Все отправленные СМС через API также можно увидеть в журнале отправленных смс. 

### Пример отправки через curl

`````
curl -X POST --data "key=key&number=8923777XXXX&text=Тест" https://sms.services.mobilon.ru/api/send

`````





### Пример отправки из 1С 8.3

`````
&НаСервере
Процедура ОтправитьСМСНаСервере()

    // необходимые переменные
    
    Перем Ключ, НаНомер, Текст, Домен;
    Домен = "sms.services.mobilon.ru";
    Ключ = "секретный ключ API";                // получите ключ API для отправки СМС
    НаНомер = "8923777XXXX";
    Текст = "Привет из 1С!";
                  
    ИмяФайлаОтправки = ПолучитьимяВременногоФайла("txt");
    ИмяВыходногоФайла = ПолучитьимяВременногоФайла("xml");
    УдалитьФайлы(имяФайлаОтправки);

    // подготавливаем запрос
    // внимание, запрос должен быть в UTF-8 без BOM (1C понимает его как CESU-8)

    ЗаписьТекста = Новый ЗаписьТекста(ИмяФайлаОтправки, "CESU-8");
    ЗаписьТекста.Записать("key=" + Ключ + "&number=" + НаНомер + "&text=" + Текст);
    ЗаписьТекста.Закрыть();          
   
    ФайлОтправки = Новый Файл(ИмяФайлаОтправки);
    Соединение = Новый HTTPСоединение(Домен);
   
    // устанавливаем заголовки запроса
    
    ЗаголовокHTTP = Новый Соответствие();
    ЗаголовокHTTP.Вставить("Content-Type", "application/x-www-form-urlencoded");
    ЗаголовокHTTP.Вставить("Content-Charset", "utf-8");
   
    // отправляем
    
    Ответ = Соединение.ОтправитьДляОбработки(имяФайлаОтправки, "/api/send", ИмяВыходногоФайла, ЗаголовокHTTP);
       
    Сообщить(ИмяВыходногоФайла);
КонецПроцедуры

`````
